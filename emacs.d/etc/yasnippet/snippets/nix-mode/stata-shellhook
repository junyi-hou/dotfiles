# -*- mode: snippet -*-
# name: stata-shellhook
# key: stata
# expand-env: ((yas-indent-line 'fixed))
# condition: (and (save-excursion (re-search-backward "^[[:space:]]*?shellHook[[:space:]\n]+" nil 'no-error)) (save-excursion (re-search-forward "^[[:space:]]*?'';[[:space:]\n]+" nil 'no-error)))
# --
export JUPYTER_PATH=$JUPYTER_PATH\${JUPYTER_PATH:+:}${stataKernel}

cat > \${projectRoot}/.stata_kernel.conf <<EOF
[stata_kernel]
stata_path = \${stata}/stata-mp
execution_mode = console
cache_directory = ~/.cache/stata_kernel_cache
autocomplete_closing_symbol = False
graph_format = png
graph_scale = 1
user_graph_keywords = coefplot,vioplot
EOF
export STATA_KERNEL_USER_CONFIG_PATH=\${projectRoot}/.stata_kernel.conf
$0
